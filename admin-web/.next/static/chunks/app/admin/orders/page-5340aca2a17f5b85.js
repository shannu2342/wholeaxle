(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{49821:function(e,t,s){Promise.resolve().then(s.bind(s,77613))},82431:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},77613:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(57437),r=s(2265),l=s(39479),n=s(71837),d=s(69174),i=s(12381),c=s(79820),x=s(68667),o=s(82431),u=s(16275);let h=e=>{switch(e){case"pending":return"warning";case"confirmed":case"shipped":default:return"secondary";case"delivered":return"success";case"cancelled":case"refunded":return"destructive"}},m=["pending","confirmed","shipped","delivered","cancelled","refunded"];function p(){let[e,t]=(0,r.useState)(!0),[s,p]=(0,r.useState)("all"),[g,j]=(0,r.useState)([]),[y,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(null),[N,w]=(0,r.useState)(null),S=async()=>{t(!0),w(null);try{var e,a;let t=await n.N.getOrders("all"===s?void 0:{status:s});j((null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.orders)||[]),f((null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.summary)||null)}catch(e){w((0,x.i)(e,"Failed to load orders"))}finally{t(!1)}};(0,r.useEffect)(()=>{S()},[s]);let O=(0,r.useMemo)(()=>(null==y?void 0:y.byStatus)||{},[y]),k=async(e,t)=>{b(e),w(null);try{await n.N.updateOrderStatus(e,t),await S()}catch(e){w((0,x.i)(e,"Failed to update status"))}finally{b(null)}};return(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Track and manage order status."})]}),(0,a.jsxs)(i.z,{variant:"outline",onClick:S,disabled:e,children:[(0,a.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),N?(0,a.jsx)("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:N}):null,(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{className:"pb-2",children:(0,a.jsx)(c.ll,{className:"text-sm font-medium text-gray-700",children:"Total Orders"})}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==y?void 0:y.totalOrders)||0})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{className:"pb-2",children:(0,a.jsx)(c.ll,{className:"text-sm font-medium text-gray-700",children:"Total Value"})}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["₹",Number((null==y?void 0:y.totalValue)||0).toLocaleString()]})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{className:"pb-2",children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Status Breakdown"]})}),(0,a.jsx)(c.aY,{className:"flex flex-wrap gap-2",children:0===Object.keys(O).length?(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"No data"}):Object.entries(O).map(e=>{let[t,s]=e;return(0,a.jsxs)(d.C,{variant:h(t),children:[t,": ",String(s)]},t)})})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{className:"gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)(c.ll,{children:"Orders"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Filter:"}),(0,a.jsxs)("select",{className:"h-10 rounded-md border bg-white px-3 text-sm",value:s,onChange:e=>p(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All"}),m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[960px] table-auto border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"Order"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Created"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Buyer"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Seller"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right",children:"Items"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right",children:"Total"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right",children:"Update"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:e?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-4 py-6 text-sm text-gray-600",children:"Loading..."})}):0===g.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-4 py-6 text-sm text-gray-600",children:"No orders found."})}):g.map(e=>{var t;let s=v===e.id;return(0,a.jsxs)("tr",{className:"bg-white",children:[(0,a.jsxs)("td",{className:"px-4 py-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.number}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.id})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(d.C,{variant:h(e.status),children:e.status})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.buyerId||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.sellerId||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-right text-sm text-gray-700",children:null!==(t=e.itemCount)&&void 0!==t?t:0}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900",children:["₹",Number(e.total||0).toLocaleString()]}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsx)("select",{className:"h-9 rounded-md border bg-white px-2 text-sm",value:e.status,onChange:t=>k(e.id,t.target.value),disabled:s,children:m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})})]},e.id)})})]})})})]})]})})}},69174:function(e,t,s){"use strict";s.d(t,{C:function(){return d}});var a=s(57437);s(2265);var r=s(90535),l=s(93448);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...r})}}},function(e){e.O(0,[809,662,830,971,117,744],function(){return e(e.s=49821)}),_N_E=e.O()}]);