(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[708],{33:function(e,t,s){Promise.resolve().then(s.bind(s,84005))},82431:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},84005:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(57437),l=s(2265),r=s(39479),c=s(71837),n=s(12381),d=s(79820),i=s(82431),x=s(42488),h=s(68667);function o(){let[e,t]=(0,l.useState)(!0),[s,o]=(0,l.useState)(null),[m,p]=(0,l.useState)([]),u=async()=>{t(!0),o(null);try{var e;let t=await c.N.getAuditLog();p((null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.events)||[])}catch(e){o((0,h.i)(e,"Failed to load audit log"))}finally{t(!1)}};return(0,l.useEffect)(()=>{u()},[]),(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Audit Log"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Security and operational events."})]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:u,disabled:e,children:[(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),s?(0,a.jsx)("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:s}):null,(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),"Events"]})}),(0,a.jsx)(d.aY,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full min-w-[1100px] table-auto border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-gray-50 text-left text-xs font-semibold uppercase tracking-wide text-gray-600",children:[(0,a.jsx)("th",{className:"px-4 py-3",children:"Time"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Actor"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Action"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Target"}),(0,a.jsx)("th",{className:"px-4 py-3",children:"Meta"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:e?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-4 py-6 text-sm text-gray-600",children:"Loading..."})}):0===m.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-4 py-6 text-sm text-gray-600",children:"No events."})}):m.map(e=>(0,a.jsxs)("tr",{className:"bg-white align-top",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.at?new Date(e.at).toLocaleString():"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.actor?(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.actor.email}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.actor.role," / ",e.actor.id]})]}):"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.action}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.target?(0,a.jsxs)("span",{className:"text-gray-900",children:[e.target.type,":",e.target.id]}):"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-gray-700",children:e.meta?(0,a.jsx)("pre",{className:"max-h-24 overflow-auto whitespace-pre-wrap rounded-md border bg-gray-50 p-2",children:JSON.stringify(e.meta,null,2)}):"-"})]},e.id))})]})})})]})]})})}}},function(e){e.O(0,[809,662,830,971,117,744],function(){return e(e.s=33)}),_N_E=e.O()}]);